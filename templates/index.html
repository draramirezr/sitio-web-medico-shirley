{% extends "base.html" %}

{% block title %}Dra. Shirley Ram√≠rez - Ginec√≥loga y Obstetra en Santo Domingo Este | Ginecolog√≠a Est√©tica L√°ser{% endblock %}

{% block description %}Ginec√≥loga y Obstetra en Santo Domingo Este. Experta en Ginecolog√≠a Est√©tica L√°ser: Rejuvenecimiento vaginal, tensado vaginal y labioplastia. Control prenatal, embarazo y salud femenina integral. Agenda tu cita: 829-740-5073{% endblock %}

{% block og_title %}Dra. Shirley Ram√≠rez - Ginec√≥loga y Obstetra en Santo Domingo Este{% endblock %}
{% block og_description %}Experta en Ginecolog√≠a Est√©tica L√°ser: Rejuvenecimiento vaginal, tensado vaginal y labioplastia. Control prenatal, embarazo y salud femenina. ¬°Agenda tu cita: 829-740-5073!{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.min.css') }}">

{% if tema == 'mes_patria' %}
<!-- Banner Superior Din√°mico con Textos Rotativos -->
<div class="patria-banner-dinamico">
    <div class="textos-rotativos">
        <div class="texto-item active">üá©üá¥ ORGULLOSAMENTE DOMINICANA üá©üá¥</div>
        <div class="texto-item">"En este mes de la patria celebra nuestra independencia con salud"</div>
        <div class="texto-item">27 de Febrero - D√≠a de la Independencia Nacional</div>
    </div>
</div>

<!-- Estilos del Tema Mes de la Patria -->
<style>
    /* Banner Superior Din√°mico */
    .patria-banner-dinamico {
        background: linear-gradient(135deg, #002D62 0%, #CE1126 100%);
        color: white;
        text-align: center;
        padding: 15px 20px;
        font-size: 16px;
        font-weight: 700;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        min-height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* Contenedor de textos rotativos */
    .textos-rotativos {
        position: relative;
        width: 100%;
        height: 25px;
        overflow: hidden;
    }
    
    .texto-item {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        padding: 0 10px;
    }
    
    .texto-item.active {
        opacity: 1;
        transform: translateY(0);
    }
    
    .texto-item.exit {
        opacity: 0;
        transform: translateY(-30px);
    }
    
    /* Borde animado tricolor - NO tocar hero-image-container */
    .borde-tricolor-rotante {
        position: absolute;
        top: -15px;
        left: -15px;
        right: -15px;
        bottom: -15px;
        border-radius: 50%;
        background: conic-gradient(
            #002D62 0deg 120deg,
            white 120deg 180deg,
            #CE1126 180deg 300deg,
            white 300deg 360deg
        );
        z-index: 0;
        animation: rotar-bandera 8s linear infinite;
        pointer-events: none;
    }
    
    @keyframes rotar-bandera {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    
    /* M√°scara interna para crear el efecto de borde */
    .borde-tricolor-rotante::after {
        content: '';
        position: absolute;
        top: 10px;
        left: 10px;
        right: 10px;
        bottom: 10px;
        background: transparent;
        border-radius: 50%;
        z-index: 1;
    }
    
    /* Asegurar que la imagen est√© encima del borde */
    .hero-image-container picture,
    .hero-image-container img {
        position: relative;
        z-index: 2;
    }
    
    /* Responsive para m√≥viles y tablets */
    @media (max-width: 768px) {
        .patria-banner-dinamico {
            font-size: 14px;
            padding: 12px 15px;
        }
        
        .textos-rotativos {
            height: 22px;
        }
        
        .borde-tricolor-rotante {
            top: -12px;
            left: -12px;
            right: -12px;
            bottom: -12px;
        }
        
        .borde-tricolor-rotante::after {
            top: 8px;
            left: 8px;
            right: 8px;
            bottom: 8px;
        }
    }
    
    @media (max-width: 480px) {
        .patria-banner-dinamico {
            font-size: 12px;
            padding: 10px 10px;
        }
        
        .textos-rotativos {
            height: 20px;
        }
        
        .texto-item {
            font-size: 12px;
        }
        
        .borde-tricolor-rotante {
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
        }
        
        .borde-tricolor-rotante::after {
            top: 6px;
            left: 6px;
            right: 6px;
            bottom: 6px;
        }
    }
</style>
{% endif %}

{% if tema == 'cancer_mama' %}
<!-- Banner Superior Din√°mico C√°ncer de Mama -->
<div class="cancer-banner-dinamico">
    <div class="textos-rotativos-rosa">
        <div class="texto-rosa-item active"><i class="fas fa-ribbon" style="color: #FFB6C1;"></i> MES DE CONCIENTIZACI√ìN DEL C√ÅNCER DE MAMA <i class="fas fa-ribbon" style="color: #FFB6C1;"></i></div>
        <div class="texto-rosa-item"><i class="fas fa-heart" style="color: #FFB6C1;"></i> "Tu salud es tu mayor tesoro - Hazte tu chequeo hoy" <i class="fas fa-heart" style="color: #FFB6C1;"></i></div>
        <div class="texto-rosa-item">Octubre: Mes de la Prevenci√≥n y Detecci√≥n Temprana</div>
    </div>
</div>

<!-- Estilos del Tema C√°ncer de Mama -->
<style>
    /* Banner Superior Din√°mico */
    .cancer-banner-dinamico {
        background: linear-gradient(135deg, #FF1493 0%, #FF69B4 100%);
        color: white;
        text-align: center;
        padding: 15px 20px;
        font-size: 16px;
        font-weight: 700;
        box-shadow: 0 4px 15px rgba(255, 20, 147, 0.3);
        overflow: hidden;
        min-height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        filter: none !important;
        -webkit-filter: none !important;
    }
    
    /* Contenedor de textos rotativos */
    .textos-rotativos-rosa {
        position: relative;
        width: 100%;
        height: 25px;
        overflow: hidden;
        filter: none !important;
    }
    
    .texto-rosa-item {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        padding: 0 10px;
        filter: none !important;
        -webkit-filter: none !important;
    }
    
    .texto-rosa-item.active {
        opacity: 1;
        transform: translateY(0);
    }
    
    .texto-rosa-item.exit {
        opacity: 0;
        transform: translateY(-30px);
    }
    
    /* Lazo Rosa Animado alrededor de la foto */
    .lazo-rosa-rotante {
        position: absolute;
        top: -15px;
        left: -15px;
        right: -15px;
        bottom: -15px;
        border-radius: 50%;
        background: repeating-conic-gradient(
            #FF1493 0deg 30deg,
            #FF69B4 30deg 60deg,
            #FFB6C1 60deg 90deg,
            #FF69B4 90deg 120deg
        );
        z-index: 0;
        animation: rotar-lazo 12s linear infinite;
        pointer-events: none;
    }
    
    @keyframes rotar-lazo {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    
    .lazo-rosa-rotante::after {
        content: '';
        position: absolute;
        top: 10px;
        left: 10px;
        right: 10px;
        bottom: 10px;
        background: transparent;
        border-radius: 50%;
        z-index: 1;
    }
    
    /* Imagen encima del lazo */
    .hero-image-container picture,
    .hero-image-container img {
        position: relative;
        z-index: 2;
    }
    
    /* Lazos rosas flotantes - reemplazan burbujas */
    .lazo-rosa-flotante {
        position: absolute;
        font-size: 60px;
        opacity: 0.15;
        animation: flotar-lazo-continuo 18s linear infinite;
        pointer-events: none;
        z-index: 0;
        filter: none !important;
        -webkit-filter: none !important;
    }
    
    .lazo-rosa-flotante i {
        color: #FF69B4 !important;
        filter: none !important;
        -webkit-filter: none !important;
    }
    
    .lazo-rosa-flotante:nth-child(1) {
        left: 10%;
        font-size: 50px;
        animation-duration: 18s;
        animation-delay: -5s;
    }
    
    .lazo-rosa-flotante:nth-child(2) {
        left: 25%;
        font-size: 70px;
        animation-duration: 22s;
        animation-delay: -12s;
    }
    
    .lazo-rosa-flotante:nth-child(3) {
        right: 25%;
        font-size: 55px;
        animation-duration: 20s;
        animation-delay: -8s;
    }
    
    .lazo-rosa-flotante:nth-child(4) {
        right: 10%;
        font-size: 65px;
        animation-duration: 24s;
        animation-delay: -15s;
    }
    
    @keyframes flotar-lazo-continuo {
        from {
            bottom: -100px;
            transform: translateX(0) rotate(0deg);
        }
        to {
            bottom: 110vh;
            transform: translateX(50px) rotate(360deg);
        }
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        .cancer-banner-dinamico {
            font-size: 14px;
            padding: 12px 15px;
        }
        
        .textos-rotativos-rosa {
            height: 22px;
        }
        
        .lazo-rosa-rotante {
            top: -12px;
            left: -12px;
            right: -12px;
            bottom: -12px;
        }
        
        .lazo-rosa-rotante::after {
            top: 8px;
            left: 8px;
            right: 8px;
            bottom: 8px;
        }
        
        .lazo-rosa-flotante {
            font-size: 45px !important;
        }
        
        .lazo-rosa-flotante i {
            color: #FF69B4 !important;
        }
        
        .lazo-rosa-flotante:nth-child(2) {
            font-size: 55px !important;
        }
    }
    
    @media (max-width: 480px) {
        .cancer-banner-dinamico {
            font-size: 12px;
            padding: 10px 10px;
        }
        
        .textos-rotativos-rosa {
            height: 20px;
        }
        
        .texto-rosa-item {
            font-size: 12px;
        }
        
        .lazo-rosa-rotante {
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
        }
        
        .lazo-rosa-rotante::after {
            top: 6px;
            left: 6px;
            right: 6px;
            bottom: 6px;
        }
        
        .lazo-rosa-flotante {
            font-size: 35px !important;
        }
        
        .lazo-rosa-flotante i {
            color: #FF69B4 !important;
        }
        
        .lazo-rosa-flotante:nth-child(2) {
            font-size: 45px !important;
        }
    }
</style>
{% endif %}

<!-- ========== HERO FULLSCREEN ========== -->
<section class="hero-fullscreen">
    <!-- Elementos decorativos flotantes -->
    {% if tema == 'cancer_mama' %}
    <!-- Lazos rosas flotantes para C√°ncer de Mama -->
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    {% else %}
    <!-- Burbujas decorativas (dise√±o original y otros temas) -->
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    {% endif %}
    
    <!-- Imagen de la Dra. Shirley - WebP con fallback -->
    <div class="hero-image-container">
        {% if tema == 'mes_patria' %}
        <!-- Borde animado tricolor para Mes de la Patria -->
        <div class="borde-tricolor-rotante"></div>
        {% elif tema == 'cancer_mama' %}
        <!-- Lazo rosa animado para C√°ncer de Mama -->
        <div class="lazo-rosa-rotante"></div>
        {% endif %}
        
        <picture>
            <source srcset="{{ url_for('static', filename='images/97472.webp') }}" type="image/webp">
            <img src="{{ url_for('static', filename='images/97472.jpg') }}" 
                 alt="Dra. Shirley Ram√≠rez - Ginec√≥loga y Obstetra en Santo Domingo"
                 width="450" 
                 height="450"
                 loading="eager"
                 decoding="async"
                 fetchpriority="high">
        </picture>
    </div>
    
    <div class="hero-content-center">
        <h1 class="hero-main-title">
            Dra. Shirley Ram√≠rez<br>
            <span class="hero-gradient-text">Cuidado Integral de la Salud Femenina</span>
        </h1>
        
        <p class="hero-tagline">
            Ginec√≥loga y Obstetra | Gineco-Est√©tica
        </p>
    </div>
    
    <div class="scroll-indicator" onclick="document.querySelector('#servicios').scrollIntoView({behavior: 'smooth'})">
        <i class="fas fa-chevron-down fa-2x" style="color: var(--primary-color);"></i>
    </div>
</section>

<!-- ========== SOBRE M√ç ========== -->
<section class="section-modern section-alt">
    <div class="container">
        <div class="banner-featured fade-in-up">
            <div class="banner-content text-center">
                <h2 class="banner-title mb-4">
                    Experiencia y Dedicaci√≥n
                </h2>
                <p class="banner-text mb-3">
                    <strong>Dra. Shirley Ram√≠rez Montero</strong>, especialista en Ginecolog√≠a y Obstetricia 
                    con formaci√≥n avanzada en medicina reproductiva y ginecolog√≠a est√©tica funcional.
                </p>
                <p class="banner-text mb-4" style="font-size: 1rem;">
                    Atenci√≥n personalizada con empat√≠a y profesionalismo, acompa√±√°ndote en cada etapa de tu vida.
                </p>
                
                <div class="text-center mt-4">
                    <a href="{{ url_for('about') }}" class="btn btn-outline-primary px-5">
                        Conocer Mi Trayectoria
                        <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========== SERVICIOS ========== -->
<section id="servicios" class="section-specialties">
    <div class="container">
        <div class="section-header fade-in-up">
            <h2 class="section-title">Especialidades M√©dicas</h2>
            <p class="section-subtitle">
                Atenci√≥n integral en todas las √°reas de la salud femenina
            </p>
        </div>
        
        <div class="row g-4 justify-content-center">
            {% for service in services %}
            {% if service['name'] in ['Consulta Ginecol√≥gica', 'Consulta Obst√©trica', 'Planificaci√≥n Familiar'] %}
            <div class="col-lg-4 col-md-6 fade-in-up" style="animation-delay: {{ loop.index * 0.15 }}s;">
                <div class="card-premium">
                    <div class="card-icon-large">
                        <i class="{{ service['icon'] or 'fas fa-stethoscope' }}"></i>
                    </div>
                    <h3 class="mb-3" style="color: var(--title-color); font-weight: 700; font-size: 1.3rem;">
                        {{ service['name'] }}
                    </h3>
                    <p class="text-muted" style="line-height: 1.7;">
                        {{ service['description'][:100] }}{% if service['description']|length > 100 %}...{% endif %}
                    </p>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        
        <div class="text-center mt-5 fade-in-up">
            <a href="{{ url_for('services') }}" class="btn btn-outline-primary px-5">
                Ver Todos los Servicios
                <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>

<!-- ========== TRATAMIENTOS EST√âTICOS BANNER ========== -->
<section class="section-aesthetics">
    <div class="container">
        <div class="banner-featured fade-in-up">
            <div class="banner-content">
                <div class="row align-items-center">
                    <div class="col-lg-7 mb-4 mb-lg-0">
                        <h2 class="banner-title">
                            Tratamientos Est√©ticos Ginecol√≥gicos
                        </h2>
                        <p class="banner-text">
                            Tecnolog√≠a l√°ser de vanguardia para tu bienestar √≠ntimo. 
                            13 tratamientos especializados con resultados comprobados.
                        </p>
                        <ul class="banner-list">
                            <li>
                                <i class="fas fa-check-circle"></i> 
                                <span>Procedimientos m√≠nimamente invasivos</span>
                            </li>
                            <li>
                                <i class="fas fa-check-circle"></i> 
                                <span>Resultados naturales y duraderos</span>
                            </li>
                            <li>
                                <i class="fas fa-check-circle"></i> 
                                <span>Recuperaci√≥n r√°pida</span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-5 banner-icon-container">
                        <i class="fas fa-spa banner-icon-large"></i>
                    </div>
                </div>
                <div class="text-center mt-4 fade-in-up">
                    <a href="{{ url_for('aesthetic_treatments') }}" class="btn btn-outline-primary px-5">
                        Explorar Tratamientos
                        <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========== TESTIMONIOS ========== -->
{% if testimonials %}
<section class="section-modern section-alt">
    <div class="container">
        <div class="section-header fade-in-up">
            <h2 class="section-title">Lo Que Dicen Mis Pacientes</h2>
            <p class="section-subtitle">
                Tu confianza es mi mayor motivaci√≥n
            </p>
        </div>
        
        <div class="row g-4">
            {% for testimonial in testimonials %}
            <div class="col-lg-4 fade-in-up" style="animation-delay: {{ loop.index * 0.15 }}s;">
                <div class="testimonial-card">
                    <!-- Header con avatar y nombre estilo Google -->
                    <div class="d-flex align-items-center mb-3">
                        <div class="testimonial-avatar" style="background: linear-gradient(135deg, #CEB0B7 0%, #B89BA3 100%); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.3rem; margin-right: 1rem; flex-shrink: 0;">
                            {{ testimonial.patient_name[0] }}
                        </div>
                        <div class="flex-grow-1">
                            <div class="d-flex align-items-center justify-content-between">
                                <strong style="color: #2c3e50; font-size: 1.1rem;">{{ testimonial.patient_name }}</strong>
                                <i class="fab fa-google" style="color: #4285F4; font-size: 1.3rem; margin-left: 0.5rem;" title="Rese√±a de Google"></i>
                            </div>
                            <div class="d-flex align-items-center gap-2 mt-1">
                                <div class="testimonial-rating" style="font-size: 0.9rem;">
                                    {% for i in range(testimonial.rating or 5) %}
                                    <i class="fas fa-star text-warning"></i>
                                    {% endfor %}
                                </div>
                                <small class="text-muted" style="font-size: 0.85rem;">
                                    {{ testimonial.time_ago }}
                                </small>
                            </div>
                        </div>
                    </div>
                    <p class="testimonial-text">{{ testimonial.testimonial_text }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5 fade-in-up">
            <a href="{{ url_for('testimonials') }}" class="btn btn-outline-primary px-5">
                Ver M√°s Testimonios
                <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- ========== CTA FINAL ========== -->
<section class="section-modern" style="position: relative; overflow: hidden;">
    <!-- Elementos decorativos flotantes -->
    {% if tema == 'cancer_mama' %}
    <!-- Lazos rosas flotantes -->
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    <div class="lazo-rosa-flotante"><i class="fas fa-ribbon"></i></div>
    {% else %}
    <!-- Burbujas decorativas -->
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    {% endif %}
    
    <div class="container" style="position: relative; z-index: 10;">
        <div class="banner-featured fade-in-up text-center">
            <div class="banner-content">
                <h2 class="banner-title mb-4">
                    ¬øLista para cuidar tu salud?
                </h2>
                <p class="banner-text mb-5">
                    Agenda tu cita hoy y comienza a recibir la atenci√≥n profesional que mereces
                </p>
                <div class="text-center">
                    <a href="{{ url_for('request_appointment') }}" class="btn-banner">
                        <i class="fas fa-calendar-plus"></i>
                        Solicitar Cita
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript para animaciones -->
<script>
    // Observer para animaciones de scroll con configuraci√≥n mejorada
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            }
        });
    }, {
        threshold: 0.15,
        rootMargin: '0px 0px -80px 0px'
    });
    
    // Observar todos los elementos con animaci√≥n
    document.querySelectorAll('.fade-in-up, .fade-in-left, .fade-in-right').forEach(el => {
        observer.observe(el);
    });
    
    // Efecto parallax suave en scroll - OPTIMIZADO
    let ticking = false;
    window.addEventListener('scroll', () => {
        if (!ticking) {
            window.requestAnimationFrame(() => {
                const scrolled = window.pageYOffset;
                const parallaxElements = document.querySelectorAll('.hero-image-container, .bubble');
                
                parallaxElements.forEach(el => {
                    const speed = el.classList.contains('bubble') ? 0.3 : 0.15;
                    el.style.transform = `translate3d(0, ${scrolled * speed}px, 0)`;
                });
                
                ticking = false;
            });
            ticking = true;
        }
    }, { passive: true });
</script>

{% if tema == 'mes_patria' %}
<script>
    // Rotaci√≥n autom√°tica de textos en el banner patri√≥tico
    document.addEventListener('DOMContentLoaded', function() {
        const textos = document.querySelectorAll('.texto-item');
        if (textos.length === 0) return;
        
        let currentIndex = 0;
        
        function rotarTexto() {
            // Marcar actual como exit
            textos[currentIndex].classList.remove('active');
            textos[currentIndex].classList.add('exit');
            
            // Siguiente texto
            currentIndex = (currentIndex + 1) % textos.length;
            
            // Limpiar clase exit despu√©s de la transici√≥n
            setTimeout(() => {
                textos.forEach(t => t.classList.remove('exit'));
            }, 800);
            
            // Activar siguiente
            textos[currentIndex].classList.add('active');
        }
        
        // Cambiar cada 4 segundos
        setInterval(rotarTexto, 4000);
    });
</script>
{% endif %}

{% if tema == 'cancer_mama' %}
<script>
    // Rotaci√≥n autom√°tica de textos en el banner rosa (c√°ncer de mama)
    document.addEventListener('DOMContentLoaded', function() {
        const textosRosa = document.querySelectorAll('.texto-rosa-item');
        if (textosRosa.length === 0) return;
        
        let currentIndexRosa = 0;
        
        function rotarTextoRosa() {
            textosRosa[currentIndexRosa].classList.remove('active');
            textosRosa[currentIndexRosa].classList.add('exit');
            currentIndexRosa = (currentIndexRosa + 1) % textosRosa.length;
            setTimeout(() => textosRosa.forEach(t => t.classList.remove('exit')), 800);
            textosRosa[currentIndexRosa].classList.add('active');
        }
        
        setInterval(rotarTextoRosa, 4000);
    });
</script>
{% endif %}
{% endblock %}
